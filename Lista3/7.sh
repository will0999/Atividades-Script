#!/bin/bash

l=$(wc -l < $1)

for (( c=1; c<=$l; c++ ))
do
	em=$(sed -n ${c}p $1)
	if [[ $(echo $em |grep -E "^(([-a-zA-Z0-9\!#\$%\&\'*+/=?^_\`{\|}~]+|(\"([][,:;<>\&@a-zA-Z0-9\!#\$%\&\'*+/=?^_\`{\|}~-]|(\\\\[\\ \"]))+\"))\.)*([-a-zA-Z0-9\!#\$%\&\'*+/=?^_\`{\|}~]+|(\"([][,:;<>\&@a-zA-Z0-9\!#\$%\&\'*+/=?^_\`{\|}~-]|(\\\\[\\ \"]))+\"))@\w((-|\w)*\w)*\.(\w((-|\w)*\w)*\.)*\w{2,4}$") ]]
	then
		echo "OK: $em"
	else
		echo "FAIL: $em"
	fi
done
